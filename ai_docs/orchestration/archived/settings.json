{
  "version": "1.0",
  "description": "Global orchestration settings and preferences",
  "last_modified": "2025-01-19",
  "orchestration_mode": {
    "enabled": false,
    "default_mode": "manual",
    "available_modes": [
      {
        "name": "manual",
        "description": "All orchestration requires explicit slash commands",
        "auto_spawn": false,
        "auto_delegate": false,
        "confirmation_required": "always"
      },
      {
        "name": "assisted",
        "description": "Suggests orchestration but requires confirmation",
        "auto_spawn": false,
        "auto_delegate": false,
        "confirmation_required": "always",
        "suggestions_enabled": true
      },
      {
        "name": "semi_auto",
        "description": "Auto-orchestrates small tasks with confirmation for large ones",
        "auto_spawn": true,
        "auto_delegate": true,
        "confirmation_required": "above_threshold",
        "threshold": {
          "agents": 2,
          "tokens": 25000
        }
      },
      {
        "name": "full_auto",
        "description": "Fully automatic orchestration (not recommended)",
        "auto_spawn": true,
        "auto_delegate": true,
        "confirmation_required": "never",
        "warning": "This mode can spawn many agents without user consent"
      }
    ]
  },
  "resource_limits": {
    "max_concurrent_agents": 10,
    "max_agents_per_team": 5,
    "max_agents_per_operation": 8,
    "max_tokens_per_session": 100000,
    "max_tokens_per_agent": 25000,
    "max_runtime_minutes": 60,
    "max_runtime_per_agent_minutes": 30
  },
  "confirmation_settings": {
    "always_require_for": [
      "sprint_start",
      "epic_planning",
      "production_deployment",
      "database_migrations"
    ],
    "show_preview": true,
    "preview_details": {
      "show_agents": true,
      "show_estimated_tokens": true,
      "show_estimated_time": true,
      "show_estimated_cost": false,
      "show_task_breakdown": true
    },
    "confirmation_thresholds": {
      "agents": {
        "warning": 3,
        "require": 5
      },
      "tokens": {
        "warning": 25000,
        "require": 50000
      },
      "time_minutes": {
        "warning": 15,
        "require": 30
      }
    }
  },
  "slash_commands": {
    "enabled": true,
    "prefix": "/orchestrate",
    "available_commands": [
      {
        "command": "sprint start",
        "description": "Start a sprint with team orchestration",
        "requires_confirmation": true
      },
      {
        "command": "sprint status",
        "description": "Check current sprint progress",
        "requires_confirmation": false
      },
      {
        "command": "task delegate",
        "description": "Delegate a task to the appropriate team",
        "requires_confirmation": true
      },
      {
        "command": "team activate",
        "description": "Activate a team for coordination",
        "requires_confirmation": true
      },
      {
        "command": "epic plan",
        "description": "Plan an epic with team input",
        "requires_confirmation": true
      },
      {
        "command": "stop",
        "description": "Stop all orchestration activities",
        "requires_confirmation": true
      },
      {
        "command": "status",
        "description": "Show orchestration status",
        "requires_confirmation": false
      },
      {
        "command": "config show",
        "description": "Display current configuration",
        "requires_confirmation": false
      },
      {
        "command": "config reload",
        "description": "Reload configuration from files",
        "requires_confirmation": false
      }
    ]
  },
  "state_management": {
    "state_directory": ".claude/state",
    "state_file": "orchestration.json",
    "backup_enabled": true,
    "backup_frequency": "hourly",
    "backup_retention_days": 7,
    "auto_cleanup": true,
    "cleanup_after_days": 30
  },
  "communication": {
    "message_bus_enabled": true,
    "event_streaming_enabled": true,
    "message_retention_hours": 24,
    "event_retention_days": 7,
    "priority_levels": ["low", "normal", "high", "critical"],
    "delivery_guarantees": "at_least_once"
  },
  "observability": {
    "metrics_enabled": true,
    "metrics_collection_interval_seconds": 30,
    "dashboard_enabled": true,
    "dashboard_auto_refresh": true,
    "log_level": "info",
    "log_formats": {
      "console": "human_readable",
      "file": "json"
    },
    "tracked_metrics": [
      "agent_utilization",
      "task_completion_rate",
      "average_task_duration",
      "error_rate",
      "token_usage",
      "sprint_velocity"
    ]
  },
  "hooks_integration": {
    "enabled": false,
    "description": "Hooks are used only for metrics tracking, not for triggering orchestration",
    "allowed_hooks": [
      "PostToolUse:Task",
      "SessionStart",
      "SessionEnd"
    ],
    "disabled_hooks": [
      "PreToolUse",
      "SubagentStart",
      "SubagentStop"
    ],
    "note": "Orchestration is triggered via slash commands, not hooks"
  },
  "budget_management": {
    "enabled": true,
    "track_token_usage": true,
    "track_time_usage": true,
    "budgets": {
      "daily": {
        "tokens": 500000,
        "runtime_minutes": 300
      },
      "weekly": {
        "tokens": 2000000,
        "runtime_minutes": 1500
      },
      "monthly": {
        "tokens": 8000000,
        "runtime_minutes": 6000
      }
    },
    "alerts": {
      "warn_at_percentage": 75,
      "stop_at_percentage": 95
    }
  },
  "error_handling": {
    "retry_failed_tasks": false,
    "max_retries": 2,
    "retry_delay_seconds": 30,
    "escalate_on_failure": true,
    "escalation_path": ["team_orchestrator", "user"],
    "preserve_state_on_error": true
  },
  "security": {
    "require_approval_for_production": true,
    "restricted_operations": [
      "database_migrations",
      "production_deployments",
      "security_changes"
    ],
    "audit_logging": true,
    "audit_log_path": ".claude/audit/orchestration.jsonl",
    "encrypt_sensitive_data": false
  }
}